<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Query Processing</title>
    </head>
    <body>
        <h1>Query Processing</h1>
        <script>
            // Get the URL search parameters
            const urlParams = new URLSearchParams(window.location.search);

            // Extract data from the query string
            const username = urlParams.get("username");
            const socialUrl = urlParams.get("socialUrl");
            const note = urlParams.get("note");

            // Function to send POST request
            function sendUserData(data) {
                const xhr = new XMLHttpRequest();
                xhr.open(
                    "POST",
                    "http://localhost:8000/request_handler/follow_user/",
                );
                xhr.setRequestHeader(
                    "Content-Type",
                    "application/x-www-form-urlencoded",
                );
                xhr.onload = function () {
                    if (xhr.status === 200) {
                        console.log("User data sent successfully!");
                    } else {
                        console.error(
                            "Error sending user data:",
                            xhr.statusText,
                        );
                    }
                };
                xhr.send(data);
            }

            // Prepare data string
            const data = `username=${username}&socialUrl=${socialUrl}&note=${note}`;

            // Send the username request
            sendUserData(data);
        </script>
    </body>
</html>
